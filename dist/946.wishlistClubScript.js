"use strict";(self.webpackChunkwishlist_script=self.webpackChunkwishlist_script||[]).push([[946],{946:(e,t,s)=>{s.r(t),s.d(t,{default:()=>i});var a=s(540),l=s(961),r=s(887),o=s(727);const i=e=>{let{onActivmodal:t,onAddWishlist:s,backinstock:i,variantId:c,productId:n,stockoutProduct:d}=e;const u=(0,r.cw)()||{},{wishlist_model:m}=r.l2,[p,h]=(0,a.useState)(""),[b,_]=(0,a.useState)(!1),[g,w]=(0,a.useState)(""),[y,v]=(0,a.useState)(""),[f,E]=(0,a.useState)(d?.[0]?.variant_id||"");return(0,a.useEffect)((()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"})),[]),l.createPortal(a.createElement(a.Fragment,null,a.createElement("div",{className:"wcWishlistModal"},a.createElement("div",{className:"wcWishlistModal_header"},a.createElement("h3",null,m.title),a.createElement("button",{onClick:t,className:"wcWishlistModal_close"},o.F.closeIcon)),a.createElement("div",{className:"wcWishlistModal_body"},a.createElement("div",{className:"wcWishlistCreate",style:{marginBottom:13}},a.createElement("label",{style:{color:"#000"}},m.label),a.createElement("input",{type:i?"email":"text",placeholder:m.placeholder,value:p,onChange:e=>{h(e.target.value),g&&w("")},style:{width:"100%",padding:"8px",border:"1px solid #ccc",borderRadius:"5px"}}),g&&a.createElement("div",{style:{color:"error"===y?"red":"success"===y?"green":"#ffcc00",borderRadius:"5px",fontSize:"14px"}},g)),i&&a.createElement("div",{className:"wcWishlistCreate"},a.createElement("select",{value:f,onChange:e=>E(e.target.value),style:{width:"100%",padding:"8px",border:"1px solid #ccc",borderRadius:"5px"}},d.map(((e,t)=>a.createElement("option",{value:e.variant_id,key:t},e.title)))))),a.createElement("div",{className:"wcWishlistModal_footer"},a.createElement("button",{onClick:t,style:{backgroundColor:m.cancel_button_bg_colour,color:m.cancel_button_text_colour,padding:"10px 15px",borderRadius:"5px",cursor:"pointer"}},m.cancel_button),a.createElement("button",{onClick:i?async()=>{if(!p)return w("Email is required!"),void v("error");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(p))return w(i.subscription_form.email_validation_message),void v("error");const e={shop:window.location.hostname,product_id:n,variant_id:f,email:p};_(!0);try{const s=await r.Kp.getbaclInstock(e);v(200===s.status?"success":"error"),w(200===s.status?i.subscription_message.success_message:s.message),200===s.status&&setTimeout(t,1500)}catch(e){w("Something went wrong. Please try again."),v("error")}finally{_(!1)}}:async()=>{if(!p)return w("Wishlist name is required!"),void v("error");_(!0);try{const e={customer_id:r.s4,ip:u.ip,shop:r.re,name:p},a=await r.Kp.createWishlist(e);200===a.status?(u.wishlist.push({id:a.id,name:p,user_id:a.user_id}),s(a.id),localStorage.setItem("wishlistClubData",JSON.stringify(u)),w("Wishlist created successfully!"),v("success"),t()):(w(a.message||"Failed to create wishlist."),v("error"))}catch(e){w("Something went wrong. Please try again."),v("error")}finally{_(!1)}},disabled:b,style:{backgroundColor:m.create_button_bg_colour,color:m.create_button_text_colour,padding:"10px 15px",borderRadius:"5px",cursor:b?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"5px"}},m.create_button,b&&a.createElement("span",null,o.F.loadingIcon)))),a.createElement("div",{className:"wcWishlistModalOverlay"})),document.body)}}}]);